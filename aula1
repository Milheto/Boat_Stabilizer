#include "mpu6050.h"
#include <Servo.h>
unsigned long instanteAnteriorDeDeteccao = 0;
unsigned long instanteAnteriorDeDeteccao1 = 0;
int angulo = 0;
Servo servo;


void setup() {
  Serial.begin(9600);
  servo.attach(9);
  mpu_begin();
  mpu_calibrate(400);
  mpu_reset();
}

void loop() {
  // put your main code here, to run repeatedly:
  //Serial.println(angulo);
 // Serial.println("teste");
  if (millis() > instanteAnteriorDeDeteccao1 + 1500) {
    instanteAnteriorDeDeteccao1 = millis();
    if (angulo <= 90) {
      angulo = 130;
      servo.write(angulo);
    } else if (angulo > 90) {
      angulo = 50;
      servo.write(angulo);
    }
  }

  mpu_loop();

  if (millis() > instanteAnteriorDeDeteccao + 500) {
    instanteAnteriorDeDeteccao = millis();

    Serial.print(getAngleX());
    Serial.print(":");
    Serial.print(getAngleY());
    Serial.print(":");
    Serial.println(getAngleZ());
  }
}
